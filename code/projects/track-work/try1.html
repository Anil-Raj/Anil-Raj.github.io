<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
<style>
rect:hover {
    color: red;
    position: relative;
}

rect[data][data-date]:hover:after {
    content: attr(data)" "attr(data-date);
    padding: 4px 8px;
    color:#fff;
    position: absolute;
    left: 0;
    top: 100%;
    white-space: nowrap;
    z-index: 20px;
    box-shadow: 0px 0px 4px #222;
 
    background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0,#000000),color-stop(1, #000000));
   
   
}
</style>
  <button onclick="draw_chart()">Draw</button>

<div class="mb-5 border border-gray-dark rounded-1 py-2">
<div class="js-calendar-graph is-graph-loading graph-canvas calendar-graph height-full" data-graph-url="/users/Anil-Raj/contributions" data-url="/Anil-Raj" data-from="2016-10-31" data-to="2016-11-14">
<svg id="svgOne" xmlns="http://www.w3.org/2000/svg" width="700" height="150"  class="js-calendar-graph-svg"> 
<svg id="svgTwo" xmlns="http://www.w3.org/2000/svg" width="700" height="20"  > 

<text x="13" y="-10" class="month">Apr</text>

 

<script type="text/javascript">
 Date.prototype.addDays = function(days) {
       var dat = new Date(this.valueOf())
       dat.setDate(dat.getDate() + days);
       return dat;
   }

function getDates(startDate, stopDate) {
  var dateArray = new Array();
  var currentDate = startDate;
  while (currentDate <= stopDate) {
    dateArray.push(currentDate)
    currentDate = currentDate.addDays(1);
  }
  return dateArray;
}

function getDatesCount(startDate,stopDate){
  var dateArray = getDates( startDate,stopDate);
  for (i = 0; i < dateArray.length; i ++ ) {
  //  alert (dateArray[i]);
  }
  return dateArray.length;
}

function number_of_complete_weeks(startDate,endDate){
  var week = ((endDate - startDate +1 ) / 7);
  return  Math.floor(week);
    
}
function draw_week(){
  var today = new Date();
  var startDate = new Date(today.getFullYear()-1,today.getMonth(),today.getDate());
  var diffDays = getDatesCount(startDate,today);
  var endX = number_of_complete_weeks(0,diffDays);
  var endY = ((diffDays) % 7);
  var x_pos;
  var y_pos;
  //alert(today.getDay());
  var svgns = "http://www.w3.org/2000/svg";
  for (var x=0 ; x < endX; x += 1 ){
    x_pos=x*12;
    for (var y = 0; y < 84 ; y += 12) {
      var rect = document.createElementNS(svgns, 'rect');
      rect.setAttributeNS(null, 'x', x_pos);
      rect.setAttributeNS(null, 'y', y);
      rect.setAttributeNS(null, 'height', '10');
      rect.setAttributeNS(null, 'width', '10');
      rect.setAttributeNS(null, 'fill', '#'+Math.round(0xffffff * Math.random()).toString(16));
      document.getElementById('svgOne').appendChild(rect);
    }
  }
  x_pos=endX*12;
  for (var y = 0; y < endY ; y += 1) {
    y_pos=y*12;
    var rect = document.createElementNS(svgns, 'rect');
    rect.setAttributeNS(null, 'x', x_pos);
    rect.setAttributeNS(null, 'y', y_pos);
    rect.setAttributeNS(null, 'height', '10');
    rect.setAttributeNS(null, 'width', '10');
    rect.setAttributeNS(null, 'fill', '#'+Math.round(0xffffff * Math.random()).toString(16));
    document.getElementById('svgOne').appendChild(rect);
  }
}
function getColor(c){
 switch(c) {
    case 0:
        return "#e3f2fd";
    case 1:
        return "#bbdefb";
    case 2:
        return "#64b5f6";
    case 3:
        return "#2196f3";
    case 4:
        return "#1e88e5";
    case 5:
        return "#1976d2";
    case 6:
        return "#1565c0";
    case 7:
        return "#0d47a1";
    default: 
        return "red";   
}
}
function n(n){
    return n > 9 ? "" + n: "0" + n;
}
Date.prototype.yyyymmdd = function() {
  var mm = this.getMonth() + 1; // getMonth() is zero-based
  var dd = this.getDate();

  return [this.getFullYear(),  n(mm),  n(dd)].join('/'); // padding
};


function getContributionCout(d){
   var data = '[["2015/11/15",4],["2015/11/16",4],["2015/11/17",6],["2015/11/18",7],["2015/11/19",4],["2015/11/20",3],["2015/11/21",2],["2015/11/22",6],["2015/11/23",3],["2015/11/24",7],["2015/11/25",1],["2015/11/26",1],["2015/11/27",5],["2015/11/28",7],["2015/11/29",2],["2015/11/30",0],["2015/12/01",4],["2015/12/02",0],["2015/12/03",4],["2015/12/04",4],["2015/12/05",5],["2015/12/06",7],["2015/12/07",1],["2015/12/08",1],["2015/12/09",7],["2015/12/10",6],["2015/12/11",0],["2015/12/12",4],["2015/12/13",6],["2015/12/14",5],["2015/12/15",4],["2015/12/16",6],["2015/12/17",1],["2015/12/18",0],["2015/12/19",5],["2015/12/20",4],["2015/12/21",0],["2015/12/22",1],["2015/12/23",1],["2015/12/24",7],["2015/12/25",4],["2015/12/26",5],["2015/12/27",6],["2015/12/28",1],["2015/12/29",0],["2015/12/30",0],["2015/12/31",2],["2016/01/01",2],["2016/01/02",4],["2016/01/03",5],["2016/01/04",4],["2016/01/05",5],["2016/01/06",2],["2016/01/07",7],["2016/01/08",2],["2016/01/09",0],["2016/01/10",4],["2016/01/11",6],["2016/01/12",5],["2016/01/13",7],["2016/01/14",2],["2016/01/15",0],["2016/01/16",3],["2016/01/17",5],["2016/01/18",3],["2016/01/19",3],["2016/01/20",5],["2016/01/21",3],["2016/01/22",2],["2016/01/23",2],["2016/01/24",2],["2016/01/25",3],["2016/01/26",3],["2016/01/27",2],["2016/01/28",3],["2016/01/29",3],["2016/01/30",3],["2016/01/31",2],["2016/02/01",2],["2016/02/02",7],["2016/02/03",7],["2016/02/04",5],["2016/02/05",2],["2016/02/06",2],["2016/02/07",3],["2016/02/08",5],["2016/02/09",0],["2016/02/10",7],["2016/02/11",7],["2016/02/12",3],["2016/02/13",2],["2016/02/14",6],["2016/02/15",2],["2016/02/16",2],["2016/02/17",1],["2016/02/18",1],["2016/02/19",5],["2016/02/20",3],["2016/02/21",3],["2016/02/22",1],["2016/02/23",7],["2016/02/24",4],["2016/02/25",3],["2016/02/26",6],["2016/02/27",2],["2016/02/28",7],["2016/02/29",0],["2016/03/01",2],["2016/03/02",0],["2016/03/03",2],["2016/03/04",5],["2016/03/05",5],["2016/03/06",2],["2016/03/07",2],["2016/03/08",5],["2016/03/09",4],["2016/03/10",1],["2016/03/11",4],["2016/03/12",3],["2016/03/13",3],["2016/03/14",7],["2016/03/15",2],["2016/03/16",4],["2016/03/17",6],["2016/03/18",7],["2016/03/19",0],["2016/03/20",0],["2016/03/21",7],["2016/03/22",0],["2016/03/23",1],["2016/03/24",4],["2016/03/25",7],["2016/03/26",4],["2016/03/27",6],["2016/03/28",0],["2016/03/29",0],["2016/03/30",4],["2016/03/31",2],["2016/04/01",7],["2016/04/02",5],["2016/04/03",7],["2016/04/04",3],["2016/04/05",6],["2016/04/06",6],["2016/04/07",7],["2016/04/08",4],["2016/04/09",5],["2016/04/10",6],["2016/04/11",3],["2016/04/12",0],["2016/04/13",1],["2016/04/14",2],["2016/04/15",6],["2016/04/16",4],["2016/04/17",2],["2016/04/18",3],["2016/04/19",7],["2016/04/20",4],["2016/04/21",7],["2016/04/22",4],["2016/04/23",7],["2016/04/24",1],["2016/04/25",7],["2016/04/26",1],["2016/04/27",5],["2016/04/28",3],["2016/04/29",2],["2016/04/30",1],["2016/05/01",5],["2016/05/02",2],["2016/05/03",0],["2016/05/04",5],["2016/05/05",7],["2016/05/06",6],["2016/05/07",0],["2016/05/08",5],["2016/05/09",2],["2016/05/10",4],["2016/05/11",0],["2016/05/12",2],["2016/05/13",6],["2016/05/14",7],["2016/05/15",2],["2016/05/16",5],["2016/05/17",2],["2016/05/18",4],["2016/05/19",6],["2016/05/20",4],["2016/05/21",0],["2016/05/22",1],["2016/05/23",0],["2016/05/24",4],["2016/05/25",6],["2016/05/26",3],["2016/05/27",6],["2016/05/28",6],["2016/05/29",4],["2016/05/30",5],["2016/05/31",1],["2016/06/01",1],["2016/06/02",2],["2016/06/03",6],["2016/06/04",7],["2016/06/05",1],["2016/06/06",2],["2016/06/07",0],["2016/06/08",7],["2016/06/09",5],["2016/06/10",2],["2016/06/11",3],["2016/06/12",2],["2016/06/13",6],["2016/06/14",2],["2016/06/15",0],["2016/06/16",2],["2016/06/17",0],["2016/06/18",1],["2016/06/19",6],["2016/06/20",5],["2016/06/21",5],["2016/06/22",0],["2016/06/23",4],["2016/06/24",7],["2016/06/25",1],["2016/06/26",3],["2016/06/27",4],["2016/06/28",1],["2016/06/29",5],["2016/06/30",3],["2016/07/01",0],["2016/07/02",3],["2016/07/03",6],["2016/07/04",2],["2016/07/05",4],["2016/07/06",3],["2016/07/07",2],["2016/07/08",6],["2016/07/09",4],["2016/07/10",2],["2016/07/11",0],["2016/07/12",6],["2016/07/13",2],["2016/07/14",6],["2016/07/15",6],["2016/07/16",2],["2016/07/17",1],["2016/07/18",2],["2016/07/19",5],["2016/07/20",7],["2016/07/21",7],["2016/07/22",5],["2016/07/23",3],["2016/07/24",4],["2016/07/25",1],["2016/07/26",4],["2016/07/27",6],["2016/07/28",6],["2016/07/29",1],["2016/07/30",2],["2016/07/31",5],["2016/08/01",7],["2016/08/02",5],["2016/08/03",0],["2016/08/04",0],["2016/08/05",1],["2016/08/06",6],["2016/08/07",6],["2016/08/08",4],["2016/08/09",7],["2016/08/10",7],["2016/08/11",4],["2016/08/12",1],["2016/08/13",1],["2016/08/14",7],["2016/08/15",5],["2016/08/16",0],["2016/08/17",5],["2016/08/18",1],["2016/08/19",6],["2016/08/20",4],["2016/08/21",2],["2016/08/22",2],["2016/08/23",4],["2016/08/24",1],["2016/08/25",4],["2016/08/26",3],["2016/08/27",7],["2016/08/28",3],["2016/08/29",5],["2016/08/30",5],["2016/08/31",2],["2016/09/01",1],["2016/09/02",3],["2016/09/03",4],["2016/09/04",7],["2016/09/05",1],["2016/09/06",2],["2016/09/07",3],["2016/09/08",2],["2016/09/09",2],["2016/09/10",2],["2016/09/11",4],["2016/09/12",0],["2016/09/13",6],["2016/09/14",3],["2016/09/15",7],["2016/09/16",1],["2016/09/17",2],["2016/09/18",6],["2016/09/19",0],["2016/09/20",5],["2016/09/21",7],["2016/09/22",0],["2016/09/23",0],["2016/09/24",2],["2016/09/25",1],["2016/09/26",4],["2016/09/27",6],["2016/09/28",6],["2016/09/29",7],["2016/09/30",7],["2016/10/01",2],["2016/10/02",4],["2016/10/03",4],["2016/10/04",3],["2016/10/05",0],["2016/10/06",5],["2016/10/07",4],["2016/10/08",1],["2016/10/09",7],["2016/10/10",4],["2016/10/11",2],["2016/10/12",2],["2016/10/13",2],["2016/10/14",6],["2016/10/15",5],["2016/10/16",2],["2016/10/17",3],["2016/10/18",2],["2016/10/19",0],["2016/10/20",0],["2016/10/21",2],["2016/10/22",2],["2016/10/23",0],["2016/10/24",7],["2016/10/25",1],["2016/10/26",6],["2016/10/27",2],["2016/10/28",5],["2016/10/29",0],["2016/10/30",1],["2016/10/31",3],["2016/11/01",2],["2016/11/02",1],["2016/11/03",2],["2016/11/04",0],["2016/11/05",3],["2016/11/06",6],["2016/11/07",0],["2016/11/08",0],["2016/11/09",6],["2016/11/10",2],["2016/11/11",4],["2016/11/12",7],["2016/11/13",4],["2016/11/14",2],["2016/11/15",3]]';
  //var data = '{"result":true,"count":1}',
    obj = JSON.parse(data);
    for(var i =0;i< obj.length;i++){
      //console.log("obj[i][0]==d is: "+(obj[i][0]==d));
      if(obj[i][0]==d){
        
        return obj[i][1];
      }
      else if (i==21){
        console.log(obj[i][0]+" "+d);
      }
      
    }
}
function draw_scale(){
  var svgns = "http://www.w3.org/2000/svg";
  var g = document.createElementNS(svgns,'g');
  g.setAttributeNS(null,'transform',' rotate(-90,550,120) ');
  var colorNumber=0;
  var y=120;
  while (colorNumber<=7) {
  var rect = document.createElementNS(svgns, 'rect');
  rect.setAttributeNS(null, 'x', 550);
  rect.setAttributeNS(null, 'y', y);
  rect.setAttributeNS(null, 'height', '10');
  rect.setAttributeNS(null, 'width', '10');
  rect.setAttributeNS(null, 'fill', getColor(colorNumber));
  g.appendChild(rect);
  colorNumber+=1;
  y+=12;
  }
   var gLow = document.createElementNS(svgns,'g');
      var textLow = document.createElementNS(svgns, 'text');
      //textelement.setAttributeNS("id", "text1");
      textLow.setAttributeNS(null,"x", 500);
      textLow.setAttributeNS(null,"y", 120);
      textLow.textContent = "Low";
      gLow.appendChild(textLow);

      var gHigh = document.createElementNS(svgns,'g');
      var textHigh = document.createElementNS(svgns, 'text');
      //textelement.setAttributeNS("id", "text1");
      textHigh.setAttributeNS(null,"x", 650);
      textHigh.setAttributeNS(null,"y", 120);
      textHigh.textContent = "High";
      gHigh.appendChild(textHigh);


  document.getElementById('svgOne').appendChild(gLow); 
  document.getElementById('svgOne').appendChild(g);
  document.getElementById('svgOne').appendChild(gHigh); 
}
function draw_chart(){
  var today = new Date();
  var a = today.yyyymmdd();
  console.log(a);
  console.log(today+"="+today.toString());
  var startDate = new Date(today.getFullYear()-1,today.getMonth(),today.getDate());
  var diffDays = getDatesCount(startDate,today);
  var endX = number_of_complete_weeks(0,diffDays);
  var endY = ((diffDays) % 7);
  var x_pos;
  var y_pos;
  var svgns = "http://www.w3.org/2000/svg";
 // alert(today.getDay());
  var currentDate = startDate;
  var x=0
  for (var x=0 ; x < 53; x += 1 ) {
    var g = document.createElementNS(svgns,'g');
    g.setAttributeNS(null,'transform','translate('+x+', 0)');
    x_pos=x*12;
    for (var y = 0; y < 84 ; y += 12) {
      if(currentDate <= today){  
      var contributionCout = getContributionCout(currentDate.yyyymmdd())
      var rect = document.createElementNS(svgns, 'rect');
      rect.setAttributeNS(null, 'x', x_pos);
      rect.setAttributeNS(null, 'y', y);
      rect.setAttributeNS(null, 'height', '10');
      rect.setAttributeNS(null, 'width', '10');
      rect.setAttributeNS(null, 'fill', getColor(contributionCout));
      rect.setAttributeNS(null, 'data-count',contributionCout); 
      rect.setAttributeNS(null, 'data-date',currentDate.yyyymmdd());
      
     
      g.appendChild(rect);
      currentDate = currentDate.addDays(1);  
      }
      else{
        //alert(x+" "+y);
        break;
      }
    }

    document.getElementById('svgOne').appendChild(g);
    draw_scale();
  }
}

</script>
</svg>
</body>
</html>